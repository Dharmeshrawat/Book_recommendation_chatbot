<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Book Genie - Your Book Companion</title>
  <meta name="theme-color" content="#2e7d32">
  <style>
    :root {
      --brand: #2e7d32;
      --brand-2: #43a047;
      --bg: #eaf7ea;
      --text: #243024;
      --muted: #5f6d5f;
      --card: #ffffff;
      --ring: rgba(46, 125, 50, 0.35);
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% -10%, #f2fff2 30%, transparent 70%),
                  radial-gradient(1200px 800px at 110% 10%, #f3fff6 20%, transparent 70%),
                  var(--bg);
      transition: background 0.3s, color 0.3s;
    }

    .dark-mode {
      --bg: #0f1210;
      --text: #e8efe8;
      --muted: #a7b2a7;
      --card: #151a16;
      background: radial-gradient(1200px 800px at -10% -10%, #0f1a13 10%, transparent 50%),
                  radial-gradient(1200px 800px at 110% -20%, #101a14 10%, transparent 50%),
                  var(--bg);
    }

    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      color: white;
      padding: 1rem 2rem;
      display: flex;
      gap: 1rem;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      transition: padding 0.25s ease, background 0.3s;
    }

    header.shrink {
      padding: 0.5rem 2rem;
    }

    .dark-mode header {
      background: linear-gradient(90deg, #0f1a13, #162218);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-weight: 700;
      letter-spacing: 0.3px;
    }

    .brand .logo {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: #ffffff1a;
      display: grid;
      place-items: center;
      box-shadow: inset 0 0 0 1px #ffffff33;
      backdrop-filter: blur(4px);
    }
    .dark-mode .brand .logo { background: #0e140f; box-shadow: inset 0 0 0 1px #27402a; }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .search {
      position: relative;
      width: min(520px, 58vw);
    }

    .search input {
      width: 100%;
      padding: 0.65rem 2.5rem 0.65rem 2.5rem;
      border-radius: 999px;
      border: 1px solid #ffffff55;
      background: #ffffff22;
      color: #fff;
      outline: none;
      transition: box-shadow 0.2s, background 0.2s;
    }

    .search input::placeholder { color: #ffffffc9; }

    .search input:focus {
      background: #ffffff33;
      box-shadow: 0 0 0 4px #ffffff22, 0 6px 16px rgba(0,0,0,0.15);
    }

    .dark-mode .search input {
      border-color: #2a3b2a;
      background: #0e140f;
      color: #e8efe8;
    }
    .dark-mode .search input::placeholder { color: #c9d3c9; }

    .search .icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #fff;
      opacity: 0.85;
      font-size: 0.95rem;
    }

    .toggle-dark {
      background: #ffffff22;
      border: 1px solid #ffffff55;
      padding: 0.5rem 0.9rem;
      border-radius: 10px;
      cursor: pointer;
      color: white;
      transition: transform 0.1s, box-shadow 0.2s, background 0.2s;
    }

    .toggle-dark:hover { background: #ffffff33; }
    .toggle-dark:active { transform: translateY(1px); }

    /* Main */
    .wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.25rem 1.25rem 3rem;
    }

    .section-head {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      margin-top: 1.25rem;
      margin-bottom: 0.5rem;
    }

    .section-head h2 {
      margin: 0;
      font-size: 1.35rem;
      color: var(--text);
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .chip {
      border: 1px solid #cfe8cf;
      background: #ffffffaa;
      color: #225722;
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, border-color 0.2s, box-shadow 0.2s;
      user-select: none;
    }
    .chip.active {
      background: #e7f6ea;
      border-color: var(--brand-2);
      box-shadow: 0 0 0 4px var(--ring);
    }
    .dark-mode .chip { background: #1c241c; color: #cfe6cf; border-color: #2a3b2a; }
    .dark-mode .chip.active { background: #213023; border-color: #3b6a42; box-shadow: 0 0 0 4px rgba(59,106,66,0.35); }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1.1rem;
      padding: 1rem 0 0;
    }

    @media (min-width: 768px) {
      .container { grid-template-columns: repeat(3, 1fr); }
    }
    @media (min-width: 1024px) {
      .container { grid-template-columns: repeat(5, 1fr); }
    }

    .book {
      background: var(--card);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      text-align: left;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
      border: 1px solid rgba(0,0,0,0.06);
    }
    .book:hover { transform: translateY(-4px); box-shadow: 0 10px 24px rgba(0,0,0,0.12); }

    .book img { width: 100%; height: 220px; object-fit: cover; display: block; }

    .book .content { padding: 0.75rem 0.9rem 1rem; }
    .book h3 { margin: 0.25rem 0 0.25rem; font-size: 1rem; }
    .book p { margin: 0; font-size: 0.88rem; color: var(--muted); }
    .dark-mode .book { border-color: #233323; box-shadow: 0 6px 18px rgba(0,0,0,0.35); }
    .dark-mode .book h3 { color: #e8efe8; }

    .card-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 0.65rem;
      gap: 0.4rem;
    }

    .btn {
      padding: 0.45rem 0.7rem;
      border-radius: 10px;
      border: 1px solid #cfe8cf;
      background: #f7fff7;
      color: #215321;
      cursor: pointer;
      font-size: 0.85rem;
      transition: transform 0.1s, background 0.2s, box-shadow 0.2s;
    }
    .btn:hover { background: #ecffec; box-shadow: 0 0 0 4px var(--ring); }
    .btn:active { transform: translateY(1px); }
    .dark-mode .btn { background: #141a15; color: #d8f0d8; border-color: #2a3b2a; }

    /* Footer */
    footer {
      text-align: center;
      color: var(--muted);
      padding: 2rem 1rem 3.5rem;
    }
    .dark-mode footer { color: #93a493; }

    /* Back to top */
    .to-top {
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color: white;
      border: none;
      display: grid;
      place-items: center;
      box-shadow: 0 10px 22px rgba(0,0,0,0.18);
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
      transition: opacity 0.2s, transform 0.2s;
      z-index: 60;
    }
    .to-top.visible { opacity: 1; pointer-events: auto; transform: translateY(0); }
    .dark-mode .to-top { background: linear-gradient(135deg, #1c2a1e, #2b3c2e); }
  </style>
</head>
<body>
  <header id="site-header">
    <div class="brand">
      <div class="logo">🌿</div>
      <div>Think Book</div>
    </div>
    <div class="header-actions">
      <div class="search">
        <span class="icon">🔎</span>
        <input id="search" type="text" placeholder="Search by title or author..." aria-label="Search books" />
      </div>
      <button class="toggle-dark" id="theme-toggle" onclick="toggleDarkMode()">🌓</button>
    </div>
  </header>

  <main class="wrapper">
    <div class="section-head">
      <h2>Explore popular books</h2>
      <div class="filters" id="filters">
        <span class="chip active" data-genre="all">All</span>
        <span class="chip" data-genre="self-help">Self Help</span>
        <span class="chip" data-genre="history">History</span>
        <span class="chip" data-genre="fiction">Fiction</span>
        <span class="chip" data-genre="fantasy">Fantasy</span>
        <span class="chip" data-genre="romance">Romance</span>
        <span class="chip" data-genre="thriller">Thriller</span>
        <span class="chip" data-genre="classic">Classic</span>
      </div>
    </div>

    <section class="container" id="grid">
      <div class="book" data-genre="self-help" data-title="Atomic Habits" data-author="James Clear">
        <img src="https://images-na.ssl-images-amazon.com/images/I/91bYsX41DVL.jpg" alt="Atomic Habits"/>
        <div class="content">
          <h3>Atomic Habits</h3>
          <p>James Clear</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="history" data-title="Sapiens" data-author="Yuval Noah Harari">
        <img src="https://images-na.ssl-images-amazon.com/images/I/713jIoMO3UL.jpg" alt="Sapiens"/>
        <div class="content">
          <h3>Sapiens</h3>
          <p>Yuval Noah Harari</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="fiction" data-title="The Alchemist" data-author="Paulo Coelho">
        <img src="https://images-na.ssl-images-amazon.com/images/I/81eB+7+CkUL.jpg" alt="The Alchemist"/>
        <div class="content">
          <h3>The Alchemist</h3>
          <p>Paulo Coelho</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="fantasy" data-title="Harry Potter" data-author="J.K. Rowling">
        <img src="https://images-na.ssl-images-amazon.com/images/I/81iqZ2HHD-L.jpg" alt="Harry Potter"/>
        <div class="content">
          <h3>Harry Potter</h3>
          <p>J.K. Rowling</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="romance" data-title="It Ends With Us" data-author="Colleen Hoover">
        <img src="https://images-na.ssl-images-amazon.com/images/I/81drfTT9ZfL.jpg" alt="It Ends With Us"/>
        <div class="content">
          <h3>It Ends With Us</h3>
          <p>Colleen Hoover</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="thriller" data-title="The Silent Patient" data-author="Alex Michaelides">
        <img src="https://images-na.ssl-images-amazon.com/images/I/91uwocAMtSL.jpg" alt="The Silent Patient"/>
        <div class="content">
          <h3>The Silent Patient</h3>
          <p>Alex Michaelides</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="classic" data-title="1984" data-author="George Orwell">
        <img src="https://images-na.ssl-images-amazon.com/images/I/71KilybDOoL.jpg" alt="1984"/>
        <div class="content">
          <h3>1984</h3>
          <p>George Orwell</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="classic" data-title="To Kill a Mockingbird" data-author="Harper Lee">
        <img src="https://images-na.ssl-images-amazon.com/images/I/71aFt4+OTOL.jpg" alt="To Kill a Mockingbird"/>
        <div class="content">
          <h3>To Kill a Mockingbird</h3>
          <p>Harper Lee</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="fiction" data-title="The Book Thief" data-author="Markus Zusak">
        <img src="https://images-na.ssl-images-amazon.com/images/I/81A-mvlo+QL.jpg" alt="The Book Thief"/>
        <div class="content">
          <h3>The Book Thief</h3>
          <p>Markus Zusak</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
      <div class="book" data-genre="self-help" data-title="Think Like a Monk" data-author="Jay Shetty">
        <img src="https://images-na.ssl-images-amazon.com/images/I/81s6DUyQCZL.jpg" alt="Think Like a Monk"/>
        <div class="content">
          <h3>Think Like a Monk</h3>
          <p>Jay Shetty</p>
          <div class="card-actions"><button class="btn" onclick="alert('Opening details...')">Details</button><button class="btn" onclick="alert('Saving...')">Save</button></div>
        </div>
      </div>
    </section>

    <footer>
      Made with ❤️ for readers — Book Genie
    </footer>
  </main>

  <button class="to-top" id="toTop" aria-label="Back to top">⬆️</button>

  <script>
    // Theme persistence and toggle with system preference and meta theme-color
    (function initTheme() {
      var saved = localStorage.getItem('theme');
      var prefersDark = false;
      try {
        prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      } catch (e) {}
      var useDark = saved ? (saved === 'dark') : prefersDark;
      if (useDark) {
        document.body.classList.add('dark-mode');
      } else {
        document.body.classList.remove('dark-mode');
      }
      updateThemeButton();
      updateMetaThemeColor();

      if (window.matchMedia) {
        try {
          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (!localStorage.getItem('theme')) {
              if (e.matches) document.body.classList.add('dark-mode');
              else document.body.classList.remove('dark-mode');
              updateThemeButton();
              updateMetaThemeColor();
            }
          });
        } catch (e) {}
      }
    })();

    function toggleDarkMode() {
      var isDark = document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateThemeButton();
      updateMetaThemeColor();
    }

    function updateThemeButton() {
      var btn = document.getElementById('theme-toggle');
      if (!btn) return;
      var isDark = document.body.classList.contains('dark-mode');
      btn.textContent = isDark ? '🌞' : '🌓';
      btn.setAttribute('aria-label', isDark ? 'Switch to light mode' : 'Switch to dark mode');
      btn.setAttribute('aria-pressed', String(isDark));
    }

    function updateMetaThemeColor() {
      var meta = document.querySelector('meta[name="theme-color"]');
      if (!meta) return;
      var isDark = document.body.classList.contains('dark-mode');
      meta.setAttribute('content', isDark ? '#0f1a13' : '#2e7d32');
    }

    // Search and filters
    const searchInput = document.getElementById('search');
    const grid = document.getElementById('grid');
    const chips = document.querySelectorAll('#filters .chip');
    let activeGenre = 'all';

    function applyFilters() {
      const query = (searchInput?.value || '').trim().toLowerCase();
      const cards = grid ? grid.querySelectorAll('.book') : [];
      cards.forEach(function(card) {
        const genre = card.getAttribute('data-genre') || '';
        const title = (card.getAttribute('data-title') || '').toLowerCase();
        const author = (card.getAttribute('data-author') || '').toLowerCase();
        const matchText = !query || title.includes(query) || author.includes(query);
        const matchGenre = activeGenre === 'all' || genre === activeGenre;
        card.style.display = (matchText && matchGenre) ? '' : 'none';
      });
    }

    if (searchInput) {
      searchInput.addEventListener('input', applyFilters);
    }

    chips.forEach(function(chip) {
      chip.addEventListener('click', function() {
        chips.forEach(function(c) { c.classList.remove('active'); });
        chip.classList.add('active');
        activeGenre = chip.getAttribute('data-genre') || 'all';
        applyFilters();
      });
    });

    // Sticky header shrink and back-to-top visibility
    const headerEl = document.getElementById('site-header');
    const toTop = document.getElementById('toTop');

    function onScroll() {
      const y = window.scrollY || document.documentElement.scrollTop;
      if (headerEl) headerEl.classList.toggle('shrink', y > 10);
      if (toTop) toTop.classList.toggle('visible', y > 300);
    }
    window.addEventListener('scroll', onScroll, { passive: true });

    if (toTop) {
      toTop.addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    // Initial filter render
    applyFilters();

    // Keyboard shortcut: Shift + D toggles theme
    document.addEventListener('keydown', function(e) {
      if (e.shiftKey && (e.key === 'D' || e.key === 'd')) {
        toggleDarkMode();
      }
    });
  </script>

  <!-- Watson Assistant Chat -->
  <script>
    window.watsonAssistantChatOptions = {
    integrationID: "ed0a2eb9-54a3-49d0-9335-7a7ade6287bd", // The ID of this integration.
    region: "au-syd", // The region your integration is hosted in.
    serviceInstanceID: "7f407b3c-468b-4276-8807-3296bc3b7f97", // The ID of your service instance.
    onLoad: async (instance) => { await instance.render(); }
  };
  setTimeout(function(){
    const t=document.createElement('script');
    t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js";
    document.head.appendChild(t);
  });
  </script>
</body>
</html>

